# 渲染模式

浏览器和服务器都可以解释JavaScript代码，把Vue.js组件渲染成HTMl元素，这个步骤称做 **渲染**。Nuxt 支持 **客户端** 和 **通用** 渲染，我们会在本章介绍两种方式的利弊。


## 只渲染客户端

开箱即用，传统的Vuejs 应用，在浏览器（或**客户端**）渲染，在浏览器下载并解析javascript代码后，Vue.js 生成Html元素展现出页面

![用户必须等待浏览器下载，解析和执行JavaScritp 后才能看到页面内容](/img/concepts/rendering/light/csr.svg){.dark:hidden}
![用户必须等待浏览器下载，解析和执行JavaScritp 后才能看到页面内容](/img/concepts/rendering/dark/csr.svg){.light:hidden}

虽然这种技术可以构建具有平滑也吗转换的复杂动态UI，但它有不同的优缺点：

### 优点

- **开发速度**: 当完全在客户端工作时，我们不必担心，代码的服务器兼容性，例如通过使用window之类的纯浏览器API
- **更便宜:** ： 运行服务器会增加基础设施成本，我们需要在支持JavaScript 的平台上运行，我们可以在任何带有HTML,CSS 和JavaScript的静态服务器上托管客户端应用程序
- **离线:** 因为代码完全运行在浏览器，它可以在没有网络的情况下完美的工作。

### 缺点

- **新能**: 用户必须等待浏览器下载解析执行JavaScript文件，下载时依赖网络情况，用户的设备用来解析和执行，这会花费一些时间，并且影响用户的体验
- **搜索引擎优化**: 索引和更新通过客户端渲染和交付的内容比服务器渲染HTML文档花费更多时间，这与我们讨论的性能缺陷有关，因为搜索引擎爬虫不会等页面第一次完全渲染去索引也吗，我们的内容将会需要更多的时间在搜索结果页面中过显示和更新。

### 例

客户端渲染是不需要索引，或者用户频繁访问的交互性很强的**web应用程序**的理想选择。它可以利用浏览器的缓存在后续访问时跳过下载阶段，例如**Sass 后台应用程序，或者在线游戏**。

## 通用渲染

当浏览器请求启用了通用（客户端+服务器端）渲染的URL时，服务器会返回渲染好的HTML页面给浏览器，无论页面时预先生成并缓存的，还是动态呈现的，Nuxt都会在服务器环境中运行JavaScritp(Vue.js)代码，生成HTML文档。与客户端渲染相反，用户会立即得到渲染好的程序内容，这步操作类似传统的PHP,或者Ruby等程序值得的**服务端渲染**。

为了不丢失客户端渲染方式的优点，例如：动态的界面和也门转换，一旦HTML文档被下载，客户端会从服务器端加载在服务器端运行的javascript代码，浏览器再次解释它（即（**通用渲染**）），然后Vue.js开始接管控制文档，并且启用交互。

在浏览器中使用静态页面交互称为“混合”

通用渲染，是的Nuxt应用能够提供快速的页面加载时间，同时，保留客户端渲染的优点，此外，内容已经存在于HTML文档中，因此爬虫程序，可以对其进行索引，而无需额外开销。



![用户可以在加载HTML文档时访问静态内容，然后混合允许页面可交互](/img/concepts/rendering/light/ssr.svg){.dark:hidden}
![用户可以在加载HTML文档时访问静态内容，然后混合允许页面可交互](/img/concepts/rendering/dark/ssr.svg){.light:hidden}

### 优点

- **性能**: 因为浏览器展现的静态内容比通过JavaScript生成的快，用户可以立即访问到页面内容。同时，当混合发生时，Nuxt保留了web应用程序的交互性。
- **搜索引擎优化**: 通用渲染像经典的服务器应用一样，把整个HTML内容呈现给浏览器。网络爬虫可以直接索引页面内容，这使得通用渲染成为您想要快速索引任何内容的最佳选择。

### 缺点

- **开发缺陷:** 服务器和浏览器环境提供的API不同，使得编写能够兼容两端的代码变得很麻烦，幸运的事，Nuxt提供的规范和特定变量可以帮助你确定一段代码在那端执行。
- **成本:** 服务器需要处于运行状态才能动态呈现页面，和传统的服务器一样，这回增加每月的开销，但是由于在通用渲染中浏览器接管了客户端导航的渲染，使得服务器调用大大减少了。

### 例子

通用渲染功能强大，几乎可以适用于任何场景，尤其适用于面向内容的网站，**博客、营销网站、产品组合、电子商务、和市场**


## 概要

客户端渲染和通用渲染在浏览器显示界面的策略不同。

默认情况下，Nuxt 使用**通用渲染**来提供更好的用户体验和性能，并优化搜索引擎索引，你可以修改[一行配置](/guide/directory-structure/nuxt.config#ssr)来切换渲染模式。


## 进入Nuxt3

多数情况下，Nuxt2 的通用渲染提供了良好的的用户和开发体验，然而，Nuxt 3 通过引入任何渲染和边缘渲染使得通用渲染更进一步。


### 混合渲染

混合渲染允许每个路由使用不同的缓存规则，并决定，服务器应如何响应特定的URL伤的请求。


同时，Nuxt应用程序的每个页面（或**路由**）都必须使用相同的渲染模式，即客户端模式或者通用模式。但是在不同的情况下，一些页面可以在构建时生成，而另一些页面则应该在客户端被渲染，例如，一个具有管理功能的内容网站，每个内容部分主要时静态的，并且只生成一次，但是管理部分需要注册并且行为更像是一个动态应用。


[阅读公开的RFC讨论实施搜集反馈.](https://github.com/nuxt/framework/discussions/560)

### 在CDN edge workers（CDN边缘服务器） 渲染

通常，服务端和通用渲染只能使用Node.js ,Nuxt 3 通过直接在CDN边缘工作站中渲染代码，将它提升到另一个水平，从而减少延迟和成本。

Nitro 是支持Nuxt3新的[服务器引擎](/guide/concepts/server-engine),它提供了对Node.js,Deno.Workers等的跨平台支持，Nitro的设计是平台无关的，它允许复制和进一步优化。
